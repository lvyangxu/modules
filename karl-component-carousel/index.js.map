{"version":3,"sources":["index.jsx"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["let React = require(\"react\");\r\nlet css = require(\"./index.css\");\r\nrequire(\"font-awesome-webpack\");\r\nlet $ = require(\"jquery\");\r\n\r\n\r\nclass carousel extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            content: [],\r\n            itemWidth: 200,\r\n            index: 1,\r\n            isMouseDown: false\r\n        };\r\n        let bindArr = [\"touch\", \"switchTo\", \"switchRemain\"];\r\n        bindArr.forEach(d=> {\r\n            this[d] = this[d].bind(this);\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        // this.touch();\r\n        this.mouse();\r\n\r\n        let content = this.props.children.concat();\r\n        let firstElement = content[0];\r\n        let lastElement = content[content.length - 1];\r\n        content = [lastElement].concat(content, firstElement);\r\n        this.setState({\r\n            content: content\r\n        });\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={css.base + \" react-carousel\"}>\r\n                <div style={{\r\n                    width: 100 * this.state.content.length + \"%\"\r\n                }} className={css.container} ref={(d)=> {\r\n                    this.container = d;\r\n                }}>\r\n                    {\r\n                        this.state.content.map((d, i)=> {\r\n                            return <div key={i} style={{\r\n                                width: 100 / (this.state.content.length) + \"%\"\r\n                            }}\r\n                                        className={css.item}>\r\n                                <div className={css.inner}>{d}</div>\r\n                            </div>\r\n                        })\r\n                    }\r\n                </div>\r\n                <div className={css.dots}>\r\n                    {\r\n                        this.state.content.filter((d, i)=> {\r\n                            if (i == 0 || i == this.state.content.length - 1) {\r\n                                return false;\r\n                            } else {\r\n                                return true;\r\n                            }\r\n                        }).map((d, i)=> {\r\n                            return <div key={i}\r\n                                        className={(this.state.index - 1 == i) ? (css.dot + \" \" + css.active) : css.dot}\r\n                                        onClick={()=> {\r\n                                            this.switchTo(i + 1);\r\n                                        }}></div>\r\n                        })\r\n                    }\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    switchTo(i) {\r\n        $(this.container).animate({marginLeft: -i * 100 + \"%\"}, ()=> {\r\n            //left to the start\r\n            if (i == 0) {\r\n                i = this.state.content.length - 2;\r\n                $(this.container).css({marginLeft: -i * 100 + \"%\"});\r\n                this.setState({\r\n                    index: i\r\n                });\r\n            }\r\n\r\n            //right to the end\r\n            if (i == this.state.content.length - 1) {\r\n                i = 1;\r\n                $(this.container).css({marginLeft: -i * 100 + \"%\"});\r\n                this.setState({\r\n                    index: i\r\n                });\r\n            }\r\n        });\r\n        this.setState({\r\n            index: i,\r\n            isMouseDown: false\r\n        });\r\n    }\r\n\r\n    touch() {\r\n        //touch\r\n        this.container.addEventListener('touchstart', e => {\r\n            const {pageX: x, pageY: y} = e.touches[0];\r\n            this.onMoveStart(x, y)\r\n        }, false);\r\n        this.container.addEventListener('touchmove', e => {\r\n            const {pageX: x, pageY: y} = e.touches[0];\r\n            this.onMove(x, y)\r\n        }, false);\r\n        this.container.addEventListener('touchend', this.onMoveEnd);\r\n    }\r\n\r\n    mouse() {\r\n        // mouse\r\n        this.container.addEventListener('mousedown', e => {\r\n            e.preventDefault();\r\n            this.setState({\r\n                startX: e.pageX,\r\n                isMouseDown: true\r\n            });\r\n        }, false);\r\n        this.container.addEventListener('mousemove', e => {\r\n            e.preventDefault();\r\n            if (this.state.startX && this.state.isMouseDown) {\r\n                this.setState({\r\n                    endX: e.pageX\r\n                });\r\n\r\n                let deltaX = e.pageX - this.state.startX;\r\n                let isChangeIndex = -1;\r\n                if ($(this.container).is(\":animated\")) {\r\n                    //if right to the end,then switch like film\r\n                    if (deltaX < 0 && this.state.index == (this.state.content.length - 2)) {\r\n                        isChangeIndex = 1;\r\n                    }\r\n                    //if left to the start,then switch like film\r\n                    if (deltaX > 0 && this.state.index == 1) {\r\n                        isChangeIndex = this.state.content.length - 2;\r\n                    }\r\n                    $(this.container).stop();\r\n                }\r\n                let endMarginLeft;\r\n                let deltaXPercent = deltaX * this.state.content.length / $(this.container).width();\r\n                if (isChangeIndex != -1) {\r\n                    endMarginLeft = (-isChangeIndex + deltaXPercent) * 100 + \"%\";\r\n                } else {\r\n                    endMarginLeft = (-this.state.index + deltaXPercent) * 100 + \"%\";\r\n                }\r\n                $(this.container).css({marginLeft: endMarginLeft});\r\n            }\r\n        }, false);\r\n        this.container.addEventListener('mouseleave', e => {\r\n            this.switchRemain(e);\r\n        }, false);\r\n        this.container.addEventListener('mouseup', e => {\r\n            this.switchRemain(e);\r\n        }, false);\r\n    }\r\n\r\n    switchRemain(e) {\r\n        e.preventDefault();\r\n\r\n        let deltaX = this.state.endX - this.state.startX;\r\n        this.setState({\r\n            startX: undefined,\r\n            endX: undefined\r\n        });\r\n\r\n        if (Math.abs(deltaX) < 30) {\r\n            this.switchTo(this.state.index);\r\n            return;\r\n        }\r\n        let endIndex;\r\n        let endMin = 0;\r\n        let endMax = (this.state.content.length - 1);\r\n\r\n        if (deltaX >= 30) {\r\n            //drag right\r\n            endIndex = this.state.index - 1;\r\n            endIndex = Math.max(endIndex, endMin);\r\n        } else if (deltaX <= -30) {\r\n            //drag left\r\n            endIndex = this.state.index + 1;\r\n            endIndex = Math.min(endIndex, endMax);\r\n        }\r\n        endIndex = endIndex == undefined ? this.state.index : endIndex;\r\n        this.switchTo(endIndex);\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nmodule.exports = carousel;"]}