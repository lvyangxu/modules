{"version":3,"sources":["index.jsx"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["let React = require(\"react\");\r\nlet css = require(\"./index.css\");\r\nrequire(\"font-awesome-webpack\");\r\nlet $ = require(\"jquery\");\r\n\r\n\r\nclass carousel extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            content: [],\r\n            itemWidth: 200,\r\n            index: 1,\r\n            isMouseDown: false\r\n        };\r\n        let bindArr = [\"delegateMouse\", \"delegateTouch\", \"animateTo\", \"cssTo\", \"startMove\", \"doMove\", \"endMove\"];\r\n        bindArr.forEach(d=> {\r\n            this[d] = this[d].bind(this);\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.delegateMouse();\r\n        this.delegateTouch();\r\n        let content = this.props.children.concat();\r\n        let firstElement = content[0];\r\n        let lastElement = content[content.length - 1];\r\n        content = [lastElement].concat(content, firstElement);\r\n        this.setState({\r\n            content: content\r\n        });\r\n\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={css.base + \" react-carousel\"}>\r\n                <div style={{\r\n                    width: 100 * this.state.content.length + \"%\",\r\n                    marginLeft: \"-100%\"\r\n                }} className={css.container} ref={(d)=> {\r\n                    this.container = d;\r\n                }}>\r\n                    {\r\n                        this.state.content.map((d, i)=> {\r\n                            return <div key={i} style={{\r\n                                width: 100 / (this.state.content.length) + \"%\"\r\n                            }}\r\n                                        className={css.item}>\r\n                                <div className={css.inner}>{d}</div>\r\n                            </div>\r\n                        })\r\n                    }\r\n                </div>\r\n                <div className={css.dots}>\r\n                    {\r\n                        this.state.content.filter((d, i)=> {\r\n                            if (i == 0 || i == this.state.content.length - 1) {\r\n                                return false;\r\n                            } else {\r\n                                return true;\r\n                            }\r\n                        }).map((d, i)=> {\r\n                            return <div key={i}\r\n                                        className={(this.state.index - 1 == i) ? (css.dot + \" \" + css.active) : css.dot}\r\n                                        onClick={()=> {\r\n                                            this.animateTo(i + 1);\r\n                                        }}></div>\r\n                        })\r\n                    }\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    animateTo(i) {\r\n        $(this.container).animate({marginLeft: -i * 100 + \"%\"});\r\n        this.setState({\r\n            index: i,\r\n            isMouseDown: false\r\n        });\r\n    }\r\n\r\n    cssTo(i, offset) {\r\n        offset = (offset == undefined) ? 0 : offset;\r\n        $(this.container).css({marginLeft: -i * 100 + offset + \"%\"});\r\n        this.setState({\r\n            index: i\r\n        });\r\n    }\r\n\r\n    startMove(x) {\r\n        this.setState({\r\n            startX: x,\r\n            isMouseDown: true\r\n        });\r\n    }\r\n\r\n    doMove(x) {\r\n        if (this.state.startX && this.state.isMouseDown) {\r\n            this.setState({\r\n                endX: x\r\n            });\r\n\r\n            let deltaX = x - this.state.startX;\r\n            if ($(this.container).is(\":animated\")) {\r\n                $(this.container).stop();\r\n            }\r\n            let endMarginLeft;\r\n            let deltaXPercent = deltaX * this.state.content.length / $(this.container).width();\r\n            endMarginLeft = (-this.state.index + deltaXPercent) * 100 + \"%\";\r\n            $(this.container).css({marginLeft: endMarginLeft});\r\n        }\r\n    }\r\n\r\n    endMove() {\r\n        let deltaX = this.state.endX - this.state.startX;\r\n        this.setState({\r\n            startX: undefined,\r\n            endX: undefined\r\n        });\r\n\r\n        if (Math.abs(deltaX) < 30) {\r\n            this.animateTo(this.state.index);\r\n            return;\r\n        }\r\n        let endIndex;\r\n        let endMin = 0;\r\n        let endMax = (this.state.content.length - 1);\r\n\r\n        if (deltaX >= 30) {\r\n            //drag right\r\n            endIndex = this.state.index - 1;\r\n            endIndex = Math.max(endIndex, endMin);\r\n            if (endIndex == 0) {\r\n                endIndex = this.state.content.length - 1;\r\n                let offset = $(this.container).css(\"marginLeft\");\r\n                offset = Number.parseFloat(offset) * this.state.content.length / $(this.container).width();\r\n                offset = offset + 1;\r\n                offset = offset * 100;\r\n                this.cssTo(endIndex, offset);\r\n                endIndex--;\r\n            }\r\n\r\n        } else if (deltaX <= -30) {\r\n            //drag left\r\n            endIndex = this.state.index + 1;\r\n            endIndex = Math.min(endIndex, endMax);\r\n            if (endIndex == this.state.content.length - 1) {\r\n                endIndex = 0;\r\n                let offset = $(this.container).css(\"marginLeft\");\r\n                offset = Number.parseFloat(offset) * this.state.content.length / $(this.container).width();\r\n                offset = offset + this.state.content.length - 2;\r\n                offset = offset * 100;\r\n                this.cssTo(endIndex, offset);\r\n                endIndex++;\r\n            }\r\n\r\n        }\r\n        endIndex = (endIndex == undefined) ? this.state.index : endIndex;\r\n        this.animateTo(endIndex);\r\n\r\n    }\r\n\r\n    delegateTouch() {\r\n        //touch\r\n        this.container.addEventListener('touchstart', e => {\r\n            e.preventDefault();\r\n            this.startMove(e.touches[0].x);\r\n        }, false);\r\n        this.container.addEventListener('touchmove', e => {\r\n            e.preventDefault();\r\n            this.doMove(e.touches[0].x);\r\n        }, false);\r\n        this.container.addEventListener('touchend', e=> {\r\n            e.preventDefault();\r\n            this.endMove();\r\n        });\r\n    }\r\n\r\n    delegateMouse() {\r\n        this.container.addEventListener('mousedown', e => {\r\n            e.preventDefault();\r\n            this.startMove(e.pageX);\r\n        }, false);\r\n        this.container.addEventListener('mousemove', e => {\r\n            e.preventDefault();\r\n            this.doMove(e.pageX);\r\n        }, false);\r\n        this.container.addEventListener('mouseleave', e => {\r\n            e.preventDefault();\r\n            this.endMove();\r\n        }, false);\r\n        this.container.addEventListener('mouseup', e => {\r\n            e.preventDefault();\r\n            this.endMove();\r\n        }, false);\r\n    }\r\n\r\n\r\n}\r\n\r\nmodule.exports = carousel;"]}