{"version":3,"sources":["index.es6"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["let $ = require(\"jquery\");\r\nrequire(\"karl-extend\");\r\n\r\nclass http {\r\n    /**\r\n     * do ajax with jquery,fit ie\r\n     * @param url\r\n     * @param httpRequestType\r\n     * @param requestTimeOutSecond\r\n     * @param requestParaData\r\n     * @param successCallback\r\n     * @param failureCallback\r\n     * @returns {*}\r\n     */\r\n    static doAjaxInJquery(url, httpRequestType, requestTimeOutSecond, requestParaData, successCallback, failureCallback) {\r\n        let request = $.ajax({\r\n            type: httpRequestType,\r\n            url: url,\r\n            cache: false,\r\n            timeout: requestTimeOutSecond * 1000,\r\n            data: requestParaData,\r\n            contentType: \"application/x-www-form-urlencoded;charset=utf-8\",\r\n            dataType: \"text\"\r\n        }).done(function (data) {\r\n            successCallback(data);\r\n        }).fail(function (XMLHttpRequest, textStatus, errorThrown) {\r\n            failureCallback(textStatus);\r\n        });\r\n        return request;\r\n    };\r\n\r\n    /**\r\n     * do post action,all param will be base64UrlEncode\r\n     * @param url\r\n     * @param requestParaData\r\n     */\r\n    static post(url, requestParaData) {\r\n        let promise = new Promise((resolve, reject)=> {\r\n            requestParaData = (requestParaData == undefined) ? {} : requestParaData;\r\n            for(let k in requestParaData){\r\n                requestParaData[k] = requestParaData[k].base64UrlEncode();\r\n            }\r\n            http.doAjaxInJquery(url, \"post\", 30, requestParaData, (d)=>{\r\n                try {\r\n                    d = d.toJson();\r\n                } catch (e) {\r\n                    reject(\"invalid json string:\" + d);\r\n                    return;\r\n                }\r\n                if (d.success == undefined || d.message == undefined) {\r\n                    reject(\"unexpected json string:\" + d);\r\n                    return;\r\n                }\r\n                if (d.success == \"true\") {\r\n                    resolve(d.message);\r\n                } else {\r\n                    if (d.message == \"unauthorized\") {\r\n                        window.location.href = \"../login/\";\r\n                        return;\r\n                    }\r\n                    reject(d.message);\r\n                }\r\n            }, function (result) {\r\n                reject(\"Client Error,Please Check Your Network:\"+result);\r\n            });\r\n        });\r\n        return promise;\r\n    }\r\n\r\n    static get(url,requestParaData){\r\n        let promise = new Promise((resolve, reject)=> {\r\n            requestParaData = (requestParaData == undefined) ? {} : requestParaData;\r\n            for(let k in requestParaData){\r\n                requestParaData[k] = requestParaData[k].base64UrlEncode();\r\n            }\r\n            http.doAjaxInJquery(url, \"get\", 30, requestParaData, (d)=>{\r\n                try {\r\n                    d = d.toJson();\r\n                } catch (e) {\r\n                    reject(\"invalid json string:\" + d);\r\n                    return;\r\n                }\r\n                if (d.success == undefined || d.message == undefined) {\r\n                    reject(\"unexpected json string:\" + d);\r\n                    return;\r\n                }\r\n                if (d.success == \"true\") {\r\n                    resolve(d.message);\r\n                } else {\r\n                    if (d.message == \"unauthorized\") {\r\n                        window.location.href = \"../login/\";\r\n                        return;\r\n                    }\r\n                    reject(d.message);\r\n                }\r\n            }, function (result) {\r\n                reject(\"Client Error,Please Check Your Network\");\r\n            });\r\n        });\r\n        return promise;\r\n    }\r\n}\r\n\r\nmodule.exports = http;"]}