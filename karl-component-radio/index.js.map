{"version":3,"sources":["index.jsx"],"names":[],"mappings":";;;;;;;;;;AAAA,IAAI,OAAO,QAAQ,WAAR,CAAX;AACA,IAAI,QAAQ,QAAQ,OAAR,CAAZ;AACA,IAAI,QAAQ,QAAQ,aAAR,CAAZ;AACA,QAAQ,sBAAR;;IAEM,K;;;AACF,mBAAY,KAAZ,EAAmB;AAAA;;AAAA,kHACT,KADS;;AAEf,cAAK,KAAL,GAAa;AACT,uBAAW,KADF;AAET,wBAAY,EAFH;AAGT,mBAAO,EAHE;AAIT,wBAAY,EAJH;AAKT,sBAAU,EALD;AAMT,yBAAa,EANJ;AAOT,uBAAW;AAPF,SAAb;AASA,YAAI,UAAU,CAAC,WAAD,EAAc,aAAd,EAA6B,cAA7B,EAA6C,QAA7C,EAAuD,eAAvD,EAAwE,eAAxE,CAAd;AACA,gBAAQ,OAAR,CAAgB,aAAI;AAChB,kBAAK,CAAL,IAAU,MAAK,CAAL,EAAQ,IAAR,OAAV;AACH,SAFD;AAZe;AAelB;;;;4CAEmB;AAAA;;AAChB,gBAAI,KAAK,KAAL,CAAW,GAAX,IAAkB,SAAtB,EAAiC;AAC7B,qBAAK,IAAL,CAAU,KAAK,KAAL,CAAW,GAArB,EAA0B,IAA1B,CAA+B,aAAI;AAC/B,wBAAI,WAAW,OAAK,aAAL,CAAmB,CAAnB,EAAsB,CAAtB,CAAf;AACA,2BAAK,QAAL,CAAc;AACV,+BAAO,OAAK,KAAL,CAAW,YAAX,GAA0B,EAA1B,GAA+B,EAAE,CAAF,CAD5B;AAEV,oCAAY,CAFF;AAGV,oCAAY,CAHF;AAIV,kCAAU;AAJA,qBAAd;AAMH,iBARD,EAQG,KARH,CAQS,aAAI;AACT,4BAAQ,GAAR,CAAY,uBAAuB,CAAnC;AACH,iBAVD;AAYH,aAbD,MAaO;AACH,oBAAI,OAAO,KAAK,KAAL,CAAW,IAAtB;AACA,oBAAI,WAAW,KAAK,aAAL,CAAmB,IAAnB,EAAyB,CAAzB,CAAf;AACA,qBAAK,QAAL,CAAc;AACV,2BAAO,KAAK,KAAL,CAAW,YAAX,GAA0B,EAA1B,GAA+B,KAAK,CAAL,CAD5B;AAEV,gCAAY,IAFF;AAGV,gCAAY,IAHF;AAIV,8BAAU;AAJA,iBAAd;AAMH;AACJ;;;kDAEyB,S,EAAW;AACjC,gBAAI,KAAK,KAAL,CAAW,KAAX,IAAoB,UAAU,KAAlC,EAAyC;AACrC,qBAAK,QAAL,CAAc;AACV,2BAAO,UAAU;AADP,iBAAd;AAGH;AACJ;;;iCAEQ;AAAA;;AACL,mBACI;AAAA;gBAAA,EAAK,WAAW,MAAM,IAAN,GAAa,oBAA7B,EAAmD,UAAS,GAA5D,EAAgE,QAAQ,KAAK,SAA7E;gBACI;AAAA;oBAAA,EAAK,WAAW,MAAM,OAAtB,EAA+B,SAAS,KAAK,WAA7C;oBACK,KAAK,KAAL,CAAW,KADhB;oBACsB,2BAAG,WAAU,kBAAb;AADtB,iBADJ;gBAII;AAAA;oBAAA,EAAK,WAAW,MAAM,KAAN,GAAc,oBAA9B;AACK,+BAAQ,KAAK,KAAL,CAAW,SAAZ,GAAyB,EAAzB,GAA8B,EAAC,SAAS,MAAV,EAD1C;oBAEI;AAAA;wBAAA,EAAK,WAAW,MAAM,MAAtB;wBACI,2BAAG,WAAU,cAAb,GADJ;wBAEI,+BAAO,WAAU,mBAAjB,EAAqC,UAAU,KAAK,YAApD;AACO,mCAAO,KAAK,KAAL,CAAW,WADzB;AAEO,yCAAY,QAFnB;AAFJ,qBAFJ;oBAQI;AAAA;wBAAA,EAAK,WAAW,MAAM,OAAtB;wBAEQ,KAAK,KAAL,CAAW,QAAX,CAAoB,GAApB,CAAwB,UAAC,CAAD,EAAI,CAAJ,EAAS;AAC7B,mCAAO,6BAAK,KAAK,CAAV,EAAa,WAAW,MAAM,MAA9B,EAAsC,SAAS,mBAAK;AACvD,2CAAK,MAAL,CAAY,CAAZ;AACH,iCAFM,EAEJ,yBAAyB,OAAK,aAAL,CAAmB,CAAnB,CAFrB,GAAP;AAGH,yBAJD,CAFR;wBAQI;AAAA;4BAAA,EAAK,WAAW,MAAM,IAAtB;4BACI;AAAA;gCAAA,EAAQ,WAAW,MAAM,QAAN,GAAiB,mBAApC,EAAyD,SAAS,mBAAK;AACnE,+CAAK,QAAL;AACH,qCAFD;gCAGI,2BAAG,WAAU,kBAAb;AAHJ,6BADJ;4BAMM,KAAK,KAAL,CAAW,SAAX,GAAuB,CAAxB,GAA6B,GAA7B,IAAqC,KAAK,IAAL,CAAU,KAAK,KAAL,CAAW,UAAX,CAAsB,MAAtB,GAA+B,EAAzC,KAAgD,CAAjD,GAC/B,CAD+B,GAC3B,KAAK,IAAL,CAAU,KAAK,KAAL,CAAW,UAAX,CAAsB,MAAtB,GAA+B,EAAzC,CADT,CANL;4BAQI;AAAA;gCAAA,EAAQ,WAAW,MAAM,SAAN,GAAkB,mBAArC,EAA0D,SAAS,mBAAK;AACpE,+CAAK,SAAL;AACH,qCAFD;gCAGI,2BAAG,WAAU,mBAAb;AAHJ;AARJ;AARJ;AARJ;AAJJ,aADJ;AAuCH;;;kCAES,C,EAAG;AACT,gBAAI,EAAE,aAAF,IAAmB,IAAnB,IAA2B,CAAC,EAAE,aAAF,CAAgB,SAAhB,CAA0B,QAA1B,CAAmC,mBAAnC,CAAhC,EAAyF;AACrF,qBAAK,QAAL,CAAc;AACV,+BAAW;AADD,iBAAd;AAGH;AACJ;;;sCAEa;AACV,iBAAK,QAAL,CAAc;AACV,2BAAW,CAAC,KAAK,KAAL,CAAW;AADb,aAAd;AAGH;;;qCAEY,C,EAAG;AACZ,gBAAI,aAAa,KAAK,KAAL,CAAW,UAAX,CAAsB,MAAtB,CAA6B,aAAI;AAC9C,uBAAO,EAAE,QAAF,GAAa,QAAb,CAAsB,EAAE,MAAF,CAAS,KAA/B,CAAP;AACH,aAFgB,CAAjB;AAGA,gBAAI,WAAW,KAAK,aAAL,CAAmB,UAAnB,EAA+B,CAA/B,CAAf;AACA,iBAAK,QAAL,CAAc;AACV,6BAAa,EAAE,MAAF,CAAS,KADZ;AAEV,2BAAW,CAFD;AAGV,4BAAY,UAHF;AAIV,0BAAU;AAJA,aAAd;AAMH;;;+BAEM,C,EAAG;AACN,iBAAK,QAAL,CAAc;AACV,2BAAW,KADD;AAEV,uBAAO;AAFG,aAAd;;AAKA,gBAAI,KAAK,KAAL,CAAW,cAAf,EAA+B;AAC3B,qBAAK,KAAL,CAAW,cAAX,CAA0B,CAA1B;AACH;AACJ;;;sCAEa,C,EAAG;AACb,gBAAI,EAAE,QAAF,EAAJ;AACA,gBAAI,IAAI,KAAK,KAAL,CAAW,WAAnB;AACA,gBAAI,QAAQ,IAAI,MAAJ,CAAW,CAAX,EAAc,GAAd,CAAZ;AACA,gBAAI,KAAK,EAAT,EAAa;AACT,uBAAO,EAAC,QAAQ,CAAT,EAAP;AACH,aAFD,MAEO;AACH,oBAAI,SAAS,EAAE,QAAF,GAAa,OAAb,CAAqB,KAArB,EAA4B,YAAK;AAC1C,2BAAO,aAAa,CAAb,GAAiB,WAAxB;AACH,iBAFY,CAAb;AAGA,uBAAO,EAAC,QAAQ,MAAT,EAAP;AACH;AACJ;;;sCAEa,I,EAAM,C,EAAG;AACnB,gBAAI,aAAa,IAAjB;AACA,gBAAI,QAAQ,IAAI,EAAhB;AACA,gBAAI,MAAM,IAAI,EAAJ,GAAS,EAAnB;AACA,kBAAM,MAAM,WAAW,MAAjB,GAA0B,WAAW,MAArC,GAA8C,GAApD;AACA,gBAAI,aAAa,WAAW,KAAX,CAAiB,KAAjB,EAAwB,GAAxB,CAAjB;AACA,mBAAO,UAAP;AACH;;;mCAEU;AACP,gBAAI,IAAI,KAAK,KAAL,CAAW,SAAnB;AACA,gBAAI,KAAK,CAAT,EAAY;AACR;AACH;AACD,iBAAK,QAAL,CAAc;AACV,2BAAW,CADD;AAEV,0BAAU,KAAK,aAAL,CAAmB,KAAK,KAAL,CAAW,UAA9B,EAA0C,CAA1C;AAFA,aAAd;AAIH;;;oCAEW;AACR,gBAAI,IAAI,KAAK,KAAL,CAAW,SAAnB;AACA,gBAAI,MAAM,KAAK,IAAL,CAAU,KAAK,KAAL,CAAW,UAAX,CAAsB,MAAtB,GAA+B,EAAzC,CAAV;AACA,gBAAI,IAAI,MAAM,CAAd,EAAiB;AACb;AACH;AACD,iBAAK,QAAL,CAAc;AACV,2BAAW,CADD;AAEV,0BAAU,KAAK,aAAL,CAAmB,KAAK,KAAL,CAAW,UAA9B,EAA0C,CAA1C;AAFA,aAAd;AAIH;;;;EAhLe,MAAM,S;;AAoL1B,OAAO,OAAP,GAAiB,KAAjB","file":"index.js","sourcesContent":["let http = require(\"karl-http\");\r\nlet React = require(\"react\");\r\nlet style = require(\"./index.css\");\r\nrequire(\"font-awesome-webpack\");\r\n\r\nclass radio extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            panelShow: false,\r\n            sourceData: [],\r\n            value: \"\",\r\n            filterData: [],\r\n            pageData: [],\r\n            filterValue: \"\",\r\n            pageIndex: 0\r\n        };\r\n        let bindArr = [\"radioBlur\", \"panelToggle\", \"filterChange\", \"select\", \"setOptionHtml\", \"slicePageData\"];\r\n        bindArr.forEach(d=> {\r\n            this[d] = this[d].bind(this);\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.url != undefined) {\r\n            http.post(this.props.url).then(d=> {\r\n                let pageData = this.slicePageData(d, 0);\r\n                this.setState({\r\n                    value: this.props.defaultBlank ? \"\" : d[0],\r\n                    sourceData: d,\r\n                    filterData: d,\r\n                    pageData: pageData\r\n                });\r\n            }).catch(d=> {\r\n                console.log(\"init radio failed:\" + d);\r\n            });\r\n\r\n        } else {\r\n            let data = this.props.data;\r\n            let pageData = this.slicePageData(data, 0);\r\n            this.setState({\r\n                value: this.props.defaultBlank ? \"\" : data[0],\r\n                sourceData: data,\r\n                filterData: data,\r\n                pageData: pageData\r\n            });\r\n        }\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (this.props.value != nextProps.value) {\r\n            this.setState({\r\n                value: nextProps.value\r\n            });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={style.base + \" react-radio-child\"} tabIndex=\"0\" onBlur={this.radioBlur}>\r\n                <div className={style.display} onClick={this.panelToggle}>\r\n                    {this.state.value}<i className=\"fa fa-caret-down\"></i>\r\n                </div>\r\n                <div className={style.panel + \" react-radio-child\"}\r\n                     style={(this.state.panelShow) ? {} : {display: \"none\"}}>\r\n                    <div className={style.filter}>\r\n                        <i className=\"fa fa-search\"></i>\r\n                        <input className=\"react-radio-child\" onChange={this.filterChange}\r\n                               value={this.state.filterValue}\r\n                               placeholder=\"filter\"/>\r\n                    </div>\r\n                    <div className={style.options}>\r\n                        {\r\n                            this.state.pageData.map((d, i)=> {\r\n                                return <div key={i} className={style.option} onClick={()=> {\r\n                                    this.select(d)\r\n                                }} dangerouslySetInnerHTML={this.setOptionHtml(d)}></div>\r\n                            })\r\n                        }\r\n                        <div className={style.page}>\r\n                            <button className={style.pageLeft + \"react-radio-child\"} onClick={()=> {\r\n                                this.pageLeft();\r\n                            }}>\r\n                                <i className=\"fa fa-angle-left\"></i>\r\n                            </button>\r\n                            {(this.state.pageIndex + 1) + \"/\" + ((Math.ceil(this.state.filterData.length / 10) == 0)\r\n                                ? 1 : Math.ceil(this.state.filterData.length / 10))}\r\n                            <button className={style.pageRight + \"react-radio-child\"} onClick={()=> {\r\n                                this.pageRight();\r\n                            }}>\r\n                                <i className=\"fa fa-angle-right\"></i>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    radioBlur(e) {\r\n        if (e.relatedTarget == null || !e.relatedTarget.className.includes(\"react-radio-child\")) {\r\n            this.setState({\r\n                panelShow: false\r\n            });\r\n        }\r\n    }\r\n\r\n    panelToggle() {\r\n        this.setState({\r\n            panelShow: !this.state.panelShow\r\n        });\r\n    }\r\n\r\n    filterChange(e) {\r\n        let filterData = this.state.sourceData.filter(d=> {\r\n            return d.toString().includes(e.target.value);\r\n        });\r\n        let pageData = this.slicePageData(filterData, 0);\r\n        this.setState({\r\n            filterValue: e.target.value,\r\n            pageIndex: 0,\r\n            filterData: filterData,\r\n            pageData: pageData\r\n        });\r\n    }\r\n\r\n    select(d) {\r\n        this.setState({\r\n            panelShow: false,\r\n            value: d\r\n        });\r\n\r\n        if (this.props.selectCallback) {\r\n            this.props.selectCallback(d);\r\n        }\r\n    }\r\n\r\n    setOptionHtml(d) {\r\n        d = d.toString();\r\n        let v = this.state.filterValue;\r\n        let regex = new RegExp(v, \"g\");\r\n        if (v == \"\") {\r\n            return {__html: d};\r\n        } else {\r\n            let result = d.toString().replace(regex, ()=> {\r\n                return \"<strong>\" + v + \"</strong>\";\r\n            });\r\n            return {__html: result};\r\n        }\r\n    }\r\n\r\n    slicePageData(data, i) {\r\n        let filterData = data;\r\n        let start = i * 10;\r\n        let end = i * 10 + 10;\r\n        end = end > filterData.length ? filterData.length : end;\r\n        let columnData = filterData.slice(start, end);\r\n        return columnData;\r\n    }\r\n\r\n    pageLeft() {\r\n        let i = this.state.pageIndex;\r\n        if (i != 0) {\r\n            i--;\r\n        }\r\n        this.setState({\r\n            pageIndex: i,\r\n            pageData: this.slicePageData(this.state.filterData, i)\r\n        });\r\n    }\r\n\r\n    pageRight() {\r\n        let i = this.state.pageIndex;\r\n        let end = Math.ceil(this.state.filterData.length / 10);\r\n        if (i < end - 1) {\r\n            i++;\r\n        }\r\n        this.setState({\r\n            pageIndex: i,\r\n            pageData: this.slicePageData(this.state.filterData, i)\r\n        });\r\n    }\r\n\r\n}\r\n\r\nmodule.exports = radio;"]}