{"version":3,"sources":["index.jsx"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["let http = require(\"karl-http\");\r\nlet React = require(\"react\");\r\nlet css = require(\"./index.css\");\r\nrequire(\"font-awesome-webpack\");\r\n\r\n/**\r\n * radio component,props means:\r\n * data:an array,element can be string or number\r\n * defaultBlank:if this props exits,then default value is \"\",else default value is the first option\r\n * callback:function after value change,param is current select value\r\n */\r\nclass radio extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            panelShow: false,\r\n            sourceData: [],\r\n            value: \"\",\r\n            filterData: [],\r\n            pageData: [],\r\n            filterValue: \"\",\r\n            pageIndex: 0\r\n        };\r\n        let bindArr = [\"panelToggle\", \"filterChange\", \"select\", \"setOptionHtml\", \"slicePageData\"];\r\n        bindArr.forEach(d=> {\r\n            this[d] = this[d].bind(this);\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.url != undefined) {\r\n            http.post(this.props.url).then(d=> {\r\n                let pageData = this.slicePageData(d, 0);\r\n                this.setState({\r\n                    value: this.props.defaultBlank ? \"\" : d[0],\r\n                    sourceData: d,\r\n                    filterData: d,\r\n                    pageData: pageData\r\n                });\r\n            }).catch(d=> {\r\n                console.log(\"init radio failed:\" + d);\r\n            });\r\n\r\n        } else {\r\n            let data = this.props.data;\r\n            let pageData = this.slicePageData(data, 0);\r\n            this.setState({\r\n                value: this.props.defaultBlank ? \"\" : data[0],\r\n                sourceData: data,\r\n                filterData: data,\r\n                pageData: pageData\r\n            });\r\n        }\r\n\r\n        window.addEventListener(\"click\", ()=> {\r\n            if (this.state.panelShow) {\r\n                this.setState({panelShow: false});\r\n            }\r\n        }, false);\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (this.props.value != nextProps.value) {\r\n            this.setState({\r\n                value: nextProps.value\r\n            });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={css.base + \" react-radio\"}>\r\n                <div className={css.display} onClick={this.panelToggle}>\r\n                    {this.state.value}<i className=\"fa fa-caret-down\"></i>\r\n                </div>\r\n                <div className={css.panel}\r\n                     onClick={(e)=>{\r\n                         e.stopPropagation();\r\n                     }}\r\n                     style={(this.state.panelShow) ? {} : {display: \"none\"}}>\r\n                    <div className={css.filter}>\r\n                        <i className=\"fa fa-search\"></i>\r\n                        <input onChange={this.filterChange}\r\n                               value={this.state.filterValue}\r\n                               placeholder=\"filter\"/>\r\n                    </div>\r\n                    <div className={css.options}>\r\n                        {\r\n                            this.state.pageData.map((d, i)=> {\r\n                                return <div key={i} className={css.option} onClick={()=> {\r\n                                    this.select(d)\r\n                                }} dangerouslySetInnerHTML={this.setOptionHtml(d)}></div>\r\n                            })\r\n                        }\r\n                        <div className={css.page}>\r\n                            <button className={css.pageLeft} onClick={()=> {\r\n                                this.pageToStart();\r\n                            }}>\r\n                                <i className=\"fa fa-angle-double-left\"></i>\r\n                            </button>\r\n                            <button className={css.pageLeft} onClick={()=> {\r\n                                this.pageLeft();\r\n                            }}>\r\n                                <i className=\"fa fa-angle-left\"></i>\r\n                            </button>\r\n                            {(this.state.pageIndex + 1) + \"/\" + ((Math.ceil(this.state.filterData.length / 10) == 0)\r\n                                ? 1 : Math.ceil(this.state.filterData.length / 10))}\r\n                            <button className={css.pageRight} onClick={()=> {\r\n                                this.pageRight();\r\n                            }}>\r\n                                <i className=\"fa fa-angle-right\"></i>\r\n                            </button>\r\n                            <button className={css.pageRight} onClick={()=> {\r\n                                this.pageToEnd();\r\n                            }}>\r\n                                <i className=\"fa fa-angle-double-right\"></i>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    panelToggle(e) {\r\n        e.stopPropagation();\r\n        this.setState({\r\n            panelShow: !this.state.panelShow\r\n        });\r\n    }\r\n\r\n    filterChange(e) {\r\n        let filterData = this.state.sourceData.filter(d=> {\r\n            return d.toString().includes(e.target.value);\r\n        });\r\n        let pageData = this.slicePageData(filterData, 0);\r\n        this.setState({\r\n            filterValue: e.target.value,\r\n            pageIndex: 0,\r\n            filterData: filterData,\r\n            pageData: pageData\r\n        });\r\n    }\r\n\r\n    select(d) {\r\n        this.setState({\r\n            panelShow: false,\r\n            value: d\r\n        });\r\n\r\n        if (this.props.callback) {\r\n            this.props.callback(d);\r\n        }\r\n    }\r\n\r\n    setOptionHtml(d) {\r\n        d = d.toString();\r\n        let v = this.state.filterValue;\r\n        let regex = new RegExp(v, \"g\");\r\n        if (v == \"\") {\r\n            return {__html: d};\r\n        } else {\r\n            let result = d.toString().replace(regex, ()=> {\r\n                return \"<strong>\" + v + \"</strong>\";\r\n            });\r\n            return {__html: result};\r\n        }\r\n    }\r\n\r\n    slicePageData(data, i) {\r\n        let filterData = data;\r\n        let start = i * 10;\r\n        let end = i * 10 + 10;\r\n        end = end > filterData.length ? filterData.length : end;\r\n        let columnData = filterData.slice(start, end);\r\n        return columnData;\r\n    }\r\n\r\n    pageLeft() {\r\n        let i = this.state.pageIndex;\r\n        if (i != 0) {\r\n            i--;\r\n        }\r\n        this.setState({\r\n            pageIndex: i,\r\n            pageData: this.slicePageData(this.state.filterData, i)\r\n        });\r\n    }\r\n\r\n    pageRight() {\r\n        let i = this.state.pageIndex;\r\n        let end = Math.ceil(this.state.filterData.length / 10);\r\n        if (i < end - 1) {\r\n            i++;\r\n        }\r\n        this.setState({\r\n            pageIndex: i,\r\n            pageData: this.slicePageData(this.state.filterData, i)\r\n        });\r\n    }\r\n\r\n    pageToStart(){\r\n        let i = 0;\r\n        this.setState({\r\n            pageIndex: i,\r\n            pageData: this.slicePageData(this.state.filterData, i)\r\n        });\r\n    }\r\n\r\n    pageToEnd(){\r\n        let end = Math.ceil(this.state.filterData.length / 10);\r\n        let i = end - 1;\r\n        this.setState({\r\n            pageIndex: i,\r\n            pageData: this.slicePageData(this.state.filterData, i)\r\n        });\r\n    }\r\n\r\n}\r\n\r\nmodule.exports = radio;"]}